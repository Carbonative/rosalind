(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{6429:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(2946)}])},5958:function(e,n,t){"use strict";t.d(n,{n:function(){return r}});let r="https:"===window.location.protocol?"":"http://10.0.0.69:3000";console.log(r)},1348:function(e,n,t){"use strict";t.d(n,{$0:function(){return j},II:function(){return h},Ph:function(){return x},SV:function(){return o},XZ:function(){return m},Y8:function(){return p},aH:function(){return c},n7:function(){return u}});var r=t(5893),i=t(7294),l=t(5066),s=t(2034),a=t.n(s);class o extends i.Component{static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){console.error(e,n)}render(){return this.state.hasError?(0,r.jsx)("p",{children:(0,r.jsx)("b",{children:"Hoppla, das h\xe4tte nicht passieren d\xfcrfen. Es ist ein technischer Fehler aufgetreten. Bitte entschuldigen Sie die Unannehmlichkeiten. Sie k\xf6nnen uns telefonisch kontaktieren. Vielen Dank!"})}):this.props.children}constructor(e){super(e),this.state={hasError:!1}}}let c=()=>(0,r.jsx)("span",{style:d,children:"*"}),d={display:"inline-block",paddingLeft:3,paddingRight:3,color:"#777"},h=e=>{let{name:n,label:t,required:i,...s}=e;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"label",htmlFor:n,children:[(0,r.jsx)("span",{children:t}),i&&(0,r.jsx)(c,{})]}),(0,r.jsx)(l.gN,{type:"text",className:"textfield",name:n,id:n,required:i,...s})]})},u=e=>{let{name:n,label:t,required:i,...s}=e,{handleChange:o}=(0,l.u6)();return(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"label",htmlFor:n,children:[(0,r.jsx)("span",{children:t}),i&&(0,r.jsx)(c,{})]}),(0,r.jsx)(a(),{name:n,id:n,required:i,className:"textfield",onChange:e=>{e.target.value=e.target.rawValue,o(e)},...s})]})},m=e=>{let{label:n,...t}=e,[i,s]=(0,l.U$)({...t,type:"checkbox"});return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("label",{className:"label",htmlFor:i.id,children:[(0,r.jsx)("input",{type:"checkbox",...i,...t}),n]})})},p=e=>{let{label:n,labelStyle:t,checkedLabelStyle:i,labelInnerStyle:s,...a}=e,[o,c]=(0,l.U$)({...a,type:"radio"});return(0,r.jsx)("div",{children:(0,r.jsxs)("label",{htmlFor:o.id,style:o.checked?i:t,children:[(0,r.jsx)("input",{type:"radio",...o,...a}),(0,r.jsx)("span",{style:s,children:n})]})})},x=e=>{let{label:n,children:t,required:i,...s}=e,[a,o]=(0,l.U$)(s);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:a.name,children:[n,i&&(0,r.jsx)(c,{})]}),(0,r.jsx)("br",{}),(0,r.jsx)("select",{className:"textfield",...a,...s,children:t})]})},j=e=>{let{children:n}=e;return(0,r.jsx)("div",{style:{paddingTop:16},children:n})}},2946:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(7294),l=t(5066),s=t(1348),a=t(4471),o=t(5958);let c=e=>{let{onSuccess:n,...t}=e,[a,c]=(0,i.useState)(null),[d,h]=(0,i.useState)(!1);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(l.J9,{initialValues:{firstName:"",lastName:"",insuranceId:"",twoFactorCode:""},onSubmit:async(e,t)=>{let{setSubmitting:r}=t;if(console.log(e),c(null),r(!0),d)try{let t=JSON.stringify({code:e.twoFactorCode,insuranceId:e.insuranceId,firstName:e.firstName,lastName:e.lastName}),i=await fetch((o.n||"")+"/portal/two-factor",{method:"POST",headers:{"content-type":"application/json","content-length":t.length},body:t}),l=await i.json();r(!1),l.token&&n(l.token),l.error&&c(l.error),console.log("res2",l)}catch(e){r(!1),c(e)}else try{let n=JSON.stringify({insuranceId:e.insuranceId,firstName:e.firstName,lastName:e.lastName}),t=await fetch((o.n||"")+"/portal/login",{method:"POST",headers:{"content-type":"application/json","content-length":n.length},body:n}),i=await t.json();r(!1),h(!0),console.log("res",i)}catch(e){r(!1),c(e)}},children:e=>{let{values:n,isSubmitting:i,handleChange:o,resetForm:u}=e;return(0,r.jsx)(r.Fragment,{children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{children:"Best\xe4tigung per SMS"}),(0,r.jsx)("p",{children:"Bitte geben Sie den 5-stelligen Code ein, der Ihnen per SMS zugesandt wurde."}),(0,r.jsxs)(l.l0,{method:"POST",children:[(0,r.jsx)(s.n7,{name:"twoFactorCode",label:"Einmal-Code (5 Stellen)",required:!0,placeholder:"0 0 0 0 0",options:{numericOnly:!0,blocks:[1,1,1,1,1],delimiter:" "}}),a&&(0,r.jsx)("p",{children:(0,r.jsx)("b",{children:"".concat(a)})}),(0,r.jsx)("input",{disabled:i||5!==n.twoFactorCode.length,className:"button",type:"submit",value:"Einloggen"}),(0,r.jsx)("p",{className:"text-muted pt3",children:"Wenn Sie nach 5 Minuten noch keinen Code erhalten haben, \xfcberpr\xfcfen Sie Ihre Eingaben auf der vorherigen Seite oder kontaktieren Sie die Ordination."}),(0,r.jsx)("a",{href:"#",onClick:()=>{u(),c(null),h(!1)},children:"< Zur\xfcck"})]})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:t.welcome||"Sehr geehrte Patientin, sehr geehrter Patient!"}),(0,r.jsx)("p",{children:t.instructions||"\xdcber dieses Formular k\xf6nnen Sie die im Rahmen Ihrer Untersuchung oder Behandlung angefertigten Bilder und Befunde bis zu 14 Tage lang nach Ihrem Termin einsehen. Melden Sie sich dazu mit ihren in der Ordination best\xe4tigten Daten an."}),(0,r.jsxs)(l.l0,{method:"POST",children:[(0,r.jsx)(s.II,{name:"firstName",label:"Vorname",required:!0}),(0,r.jsx)(s.II,{name:"lastName",label:"Nachname",required:!0}),(0,r.jsx)(s.n7,{name:"insuranceId",label:"Sozialversicherungsnummer (10 Stellen)",required:!0,pattern:"[0-9\\s]+",placeholder:"0000 000000",options:{numericOnly:!0,blocks:[4,6],delimiter:" "}}),a&&(0,r.jsx)("p",{children:(0,r.jsx)("b",{children:"".concat(a)})}),(0,r.jsx)("input",{disabled:i||!(n.firstName&&n.lastName&&n.insuranceId&&10===n.insuranceId.length),className:"button",type:"submit",value:"Einloggen"})]})]})})}})})};n.default=()=>{let[e,n]=(0,i.useState)(null);return e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{children:"Ihre Befunde und Bilder"}),(0,r.jsx)(a.default,{token:e}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("a",{href:"#",onClick:e=>{window.location.reload()},children:"Ausloggen"})]}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(c,{onSuccess:n})})}},4471:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(7294),l=t(5958);let s={maxWidth:"25%",height:"auto",outline:0,margin:3},a="undefined"!=typeof document&&"download"in document.createElement("a");n.default=e=>{let{token:n}=e,[t,o]=(0,i.useState)(!0),[c,d]=(0,i.useState)(!1),[h,u]=(0,i.useState)(!0),[m,p]=(0,i.useState)([]);(0,i.useEffect)(()=>{!async function(){try{d(null),o(!0);let e=JSON.stringify({token:n}),t=await fetch((l.n||"")+"/portal/media",{method:"POST",headers:{"content-type":"application/json","content-length":e.length},body:e}),r=await t.json();o(!1),r.error?d(r.error):p(r)}catch(e){o(!1),d(e)}}()},[n,h]);let x=e=>{let{filename:n,b64:t,mediaType:r}=e;console.log("saveasfile",n,t.substr(0,100));let i=document.createElement("a");i.download=n,t.startsWith("data:")||(t="data:"+r+";base64,"+t),i.href=t,i.click()},j=async e=>{d(null);try{let t=JSON.stringify({token:n,_id:e._id}),r=await fetch((l.n||"")+"/portal/media-download",{method:"POST",headers:{"content-type":"application/json","content-length":t.length},body:t}),i=await r.json();o(!1),i.error?(console.error(i),d(i.error)):(d(null),console.log("saving"),x({filename:i.filename,mediaType:i.mediaType,b64:i.b64}))}catch(e){console.error(e),o(!1),d(e)}};return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:"Sie k\xf6nnen die Bilder innerhalb von 14 Tagen abspeichern."}),a?(0,r.jsx)("p",{children:"Tippen Sie auf ein Bild, um es zu speichern."}):(0,r.jsx)("p",{children:"Tippen Sie auf ein Bild und halten Sie gedr\xfcckt, um es zu speichern."}),(0,r.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation();for(let e=0;e<m.length;e++)document.getElementById("link-"+m[e]._id).click()},children:"Alle Bilder speichern"}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),c&&(0,r.jsxs)("div",{children:["Fehler: ",c.toString()]}),t&&(0,r.jsx)("div",{children:"Einen Moment bitte, Bilder werden geladen..."}),(m||[]).map(e=>(0,r.jsx)("a",{id:"link-"+e._id,title:e.title,href:"#",onClick:()=>j(e),children:(0,r.jsx)("img",{style:s,alt:e.title,src:e.preview})},e._id)),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("a",{href:"#",onClick:()=>u(h+1),children:"Neu laden"})]})}}},function(e){e.O(0,[859,888,774,179],function(){return e(e.s=6429)}),_N_E=e.O()}]);