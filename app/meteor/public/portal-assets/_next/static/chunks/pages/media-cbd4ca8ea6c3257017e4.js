_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[9],{"7Nrg":function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/media",function(){return t("CaRH")}])},CaRH:function(e,n,t){"use strict";t.r(n);var r=t("nKUr"),i=t("o0o1"),c=t.n(i),o=t("HaE+"),a=t("q1tI"),s=t("leFc"),l={maxWidth:"25%",height:"auto",outline:0,margin:3},u="undefined"!==typeof document&&"download"in document.createElement("a");n.default=function(e){var n=e.token,t=Object(a.useState)(!0),i=t[0],d=t[1],p=Object(a.useState)(!1),f=p[0],h=p[1],b=Object(a.useState)(!0),j=b[0],v=b[1],m=Object(a.useState)([]),O=m[0],x=m[1];Object(a.useEffect)(Object(o.a)(c.a.mark((function e(){var t,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(null),d(!0),t=JSON.stringify({token:n}),e.next=6,fetch((s.a||"")+"/portal/media",{method:"POST",headers:{"content-type":"application/json","content-length":t.length},body:t});case 6:return r=e.sent,e.next=9,r.json();case 9:i=e.sent,d(!1),i.error?h(i.error):x(i),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),d(!1),h(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])}))),[n,j]);var w=function(e){var n=e.filename,t=e.b64,r=e.mediaType;console.log("saveasfile",n,t.substr(0,100));var i=document.createElement("a");i.download=n,t.startsWith("data:")||(t="data:"+r+";base64,"+t),i.href=t,i.click()},g=function(){var e=Object(o.a)(c.a.mark((function e(t){var r,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(null),e.prev=1,r=JSON.stringify({token:n,_id:t._id}),e.next=5,fetch((s.a||"")+"/portal/media-download",{method:"POST",headers:{"content-type":"application/json","content-length":r.length},body:r});case 5:return i=e.sent,e.next=8,i.json();case 8:o=e.sent,d(!1),o.error?(console.error(o),h(o.error)):(h(null),console.log("saving"),w({filename:o.filename,mediaType:o.mediaType,b64:o.b64})),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0),d(!1),h(e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(n){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{children:"Sie k\xf6nnen die Bilder innerhalb von 14 Tagen abspeichern."}),u?Object(r.jsx)("p",{children:"Tippen Sie auf ein Bild, um es zu speichern."}):Object(r.jsx)("p",{children:"Tippen Sie auf ein Bild und halten Sie gedr\xfcckt, um es zu speichern."}),Object(r.jsx)("button",{onClick:function(e){e.preventDefault(),e.stopPropagation();for(var n=0;n<O.length;n++)document.getElementById("link-"+O[n]._id).click()},children:"Alle Bilder speichern"}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),f&&Object(r.jsxs)("div",{children:["Fehler: ",f.toString()]}),i&&Object(r.jsx)("div",{children:"Einen Moment bitte, Bilder werden geladen..."}),(O||[]).map((function(e){return Object(r.jsx)("a",{id:"link-"+e._id,title:e.title,href:"#",onClick:function(){return g(e)},children:Object(r.jsx)("img",{style:l,alt:e.title,src:e.preview})},e._id)})),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("a",{href:"#",onClick:function(){return v(j+1)},children:"Neu laden"})]})}},"HaE+":function(e,n,t){"use strict";function r(e,n,t,r,i,c,o){try{var a=e[c](o),s=a.value}catch(l){return void t(l)}a.done?n(s):Promise.resolve(s).then(r,i)}function i(e){return function(){var n=this,t=arguments;return new Promise((function(i,c){var o=e.apply(n,t);function a(e){r(o,i,c,a,s,"next",e)}function s(e){r(o,i,c,a,s,"throw",e)}a(void 0)}))}}t.d(n,"a",(function(){return i}))},leFc:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var r="https:"===window.location.protocol?"":"http://10.0.0.69:3000";console.log(r)}},[["7Nrg",0,2,1]]]);